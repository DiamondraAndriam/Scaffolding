import { Component, OnInit } from '@angular/core';
import { RouterOutlet } from '@angular/router';
import { RegionService } from './region.service';
import { FormsModule } from '@angular/forms';
import { #Name# } from './#Name#';

@Component({
  selector: 'app-root',
  standalone: true,
  imports: [RouterOutlet, FormsModule],
  templateUrl: './#name#.component.html',
  styleUrl: './#name#.component.scss'
})
export class #Name#Component implements OnInit{
    title = 'CRUD #Name#';
    data : #Name# = new #Name#;
    toUpdate : any;
    toDelete : any;
    #name#Data : any;

    constructor(private #name#: #Name#Service){}
    
    ngOnInit(): void {
        this.#name#.get().subscribe(
            (data) => {
                this.#name#Data = data;
            },
            (error) => {
                console.error('Error fetching data:', error);
            }
        )
    }

    setUpdate(item : any): void{
        this.toUpdate = item;
    }

    deleteItem(item : any): void{
        this.region.delete(item).subscribe(
            (data) => {
                console.log(data);
                // location.reload();
            },
            (error) => {
                console.error('Error fetching data:', error);
            }
        );
    } 

    submitInsert(): any{
        this.region.save(this.data).subscribe(
            (data) => {
                console.log(data);
                location.reload();
            }
        )
    }

    submitUpdate(): any{
        this.region.update(this.data).subscribe(
            (data) => {
                console.log(data);
                location.reload();
            }
        )
    }
  

}
    